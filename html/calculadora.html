<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aquatech</title>
    <link rel="stylesheet" href="../css/calcul.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="navbar-container"></div>
    <script>
        fetch("./components/navbar.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("navbar-container").innerHTML = data;
            });
    </script>
    <main>
        <section class="hero-banner">
            <div class="conteudo-banner">
                <img src="../imagens/calcu.png" alt="Imagem Hero" class="hero-image" />
                <a href="#" class="botao">
                    Começar simulação agora <i class="bi bi-arrow-down-right"></i>
                </a>
            </div>
        </section>
        <section class="info">
            <h2>Como é o seu consumo de água?</h2>
            <p>Responda perguntas rápidas sobre seus<br>hábitos e descubra uma estimativa do seu<br>consumo mensal.</p>

            <div class="cards">
                <div class="card">
                    <i class="bi bi-patch-question-fill"></i><br>
                    <h3>Por que usar?</h3><br>
                    <p>Simule seu consumo<br> de água e identifique <br> onde estão os maiores <br> desperdícios no seu
                        <br> dia a dia.
                    </p>
                </div>
                <div class="card">
                    <i class="bi bi-gear-fill"></i><br>
                    <h3>Como funciona?</h3><br>
                    <p>Responda perguntas<br> rápidas. A calculadora <br> estima seu consumo <br> mensal com base nos
                        <br> hábitos.
                    </p>
                </div>
                <div class="card">
                    <i class="bi bi-rocket-takeoff-fill"></i><br>
                    <h3>O que você ganha?</h3><br>
                    <p>Consciência ambiental, <br> economia na conta e <br> ações práticas para um <br> futuro mais
                        sustentável.
                    </p>
                </div>
            </div>
        </section>
        <section class="chamada-central">
            <h2>Confira agora sua estimativa!</h2>
        </section>

        <hr class="divisor">

        <section class="explicacao-final">
            <div class="conteudo-explicacao">
                <h2>Calcule com consciência</h2>
                <p>Veja como atitudes simples afetam seu consumo mensal.</p>
            </div>
        </section>

        <div class="campo">
            <label>Quantas pessoas vivem na sua casa?</label>
            <div id="pessoas">
                <button type="button" onclick="setPessoas(1)">1</button>
                <button type="button" onclick="setPessoas(2)">2</button>
                <button type="button" onclick="setPessoas(3)">3</button>
                <button type="button" onclick="setPessoas(4)">4</button>
                <button type="button" onclick="setPessoas(5)">5+</button>
            </div>
        </div>

        <div class="campo">
            <label>Tempo médio de banho por pessoa (min)</label>
            <input type="range" id="tempoBanho" min="5" max="30" value="10"
                oninput="this.nextElementSibling.innerText = this.value + ' min'">
            <span>10 min</span>
        </div>

        <div class="campo">
            <label>Descargas por dia (média total)</label>
            <input type="number" id="descargas">
        </div>

        <div class="campo">
            <label>Tempo escovando os dentes com torneira aberta (min)</label>
            <input type="range" id="tempoEscovar" min="1" max="10" value="2"
                oninput="this.nextElementSibling.innerText = this.value + ' min'">
            <span>2 min</span>
        </div>

        <div class="campo">
            <label>Lava louça com torneira aberta?</label>
            <input type="radio" name="lavaLouca" value="sim" onclick="mostrarLouca(true)"> Sim
            <input type="radio" name="lavaLouca" value="nao" onclick="mostrarLouca(false)"> Não
            <div id="tempoLoucaContainer" class="hidden">
                <label>Tempo médio lavando louça (min)</label>
                <input type="range" id="tempoLouca" min="1" max="20" value="10"
                    oninput="this.nextElementSibling.innerText = this.value + ' min'">
                <span>10 min</span>
            </div>
        </div>

        <div class="campo">
            <label>Quantas vezes lava louça por dia?</label>
            <input type="number" id="vezesLouca">
        </div>

        <div class="campo">
            <label>Lava o carro?</label>
            <input type="radio" name="lavaCarro" value="sim" onclick="mostrarCarro(true)"> Sim
            <input type="radio" name="lavaCarro" value="nao" onclick="mostrarCarro(false)"> Não
            <div id="metodoCarroContainer" class="hidden">
                <label>Método:</label>
                <select id="metodoCarro">
                    <option value="mangueira">Mangueira</option>
                    <option value="balde">Balde</option>
                </select>
            </div>
        </div>

        <button onclick="calcular()">CALCULAR</button>
        </div>

        <div id="overlay" class="hidden"></div>
        <div id="modalResultado" class="modal hidden">
            <h3>Seu resultado de Consumo:</h3>
            <p>Você consome aproximadamente:</p>
            <p><strong id="resultadoModal">0 litros por mês</strong></p>
            <p><em id="tipoConsumo">Tipo de consumo: moderado</em></p>
            <button onclick="fecharModal()">Fechar</button>
        </div>

        <div class="resultado hidden" id="resultadoFinal"></div>

        <script>
            let pessoas = 1;

            function setPessoas(qtd) {
                pessoas = qtd;
                [...document.querySelectorAll('#pessoas button')].forEach(btn => btn.style.background = '');
                event.target.style.background = '#357edd';
            }

            function mostrarLouca(show) {
                document.getElementById('tempoLoucaContainer').classList.toggle('hidden', !show);
            }

            function mostrarCarro(show) {
                document.getElementById('metodoCarroContainer').classList.toggle('hidden', !show);
            }

            function calcular() {
                const banho = Number(document.getElementById('tempoBanho').value);
                const escovar = Number(document.getElementById('tempoEscovar').value);
                const descargas = Number(document.getElementById('descargas').value) || 0;
                const vezesLouca = Number(document.getElementById('vezesLouca').value) || 0;

                const lavaLouca = document.querySelector('input[name="lavaLouca"]:checked')?.value === 'sim';
                const tempoLouca = lavaLouca ? Number(document.getElementById('tempoLouca').value) : 0;

                const lavaCarro = document.querySelector('input[name="lavaCarro"]:checked')?.value === 'sim';
                const metodoCarro = lavaCarro ? document.getElementById('metodoCarro').value : '';

                let consumo = 0;
                consumo += pessoas * banho * 12 * 30;
                consumo += escovar * 4 * pessoas * 30;
                consumo += descargas * 12;
                consumo += tempoLouca * vezesLouca * 30;
                if (lavaCarro && metodoCarro === 'mangueira') consumo += 500;
                else if (lavaCarro && metodoCarro === 'balde') consumo += 100;

                const tipo = consumo < 5000 ? 'baixo' : consumo < 10000 ? 'moderado' : 'alto';

                document.getElementById('resultadoModal').innerText = consumo.toLocaleString() + ' litros por mês';
                document.getElementById('tipoConsumo').innerText = 'Tipo de consumo: ' + tipo;
                document.getElementById('modalResultado').classList.remove('hidden');
                document.getElementById('overlay').classList.remove('hidden');

                // salvar pra exibir depois
                window._resultadoConsumo = { consumo, tipo };
            }

            function fecharModal() {
                document.getElementById('modalResultado').classList.add('hidden');
                document.getElementById('overlay').classList.add('hidden');

                const r = window._resultadoConsumo;
                if (!r) return;

                document.getElementById('resultadoFinal').innerHTML = `
      <h3>SEU CONSUMO ESTIMADO</h3>
      <p>Você consome aproximadamente: <strong>${r.consumo.toLocaleString()} litros por mês</strong></p>
      <p><em>Tipo de consumo: ${r.tipo}</em></p>
    `;
                document.getElementById('resultadoFinal').classList.remove('hidden');
            }
        </script>

    </main>

</body>

</html>