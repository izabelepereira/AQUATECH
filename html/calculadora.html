<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aquatech</title>
    <link rel="stylesheet" href="../css/calcul.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;400;700&display=swap" rel="stylesheet" />
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <div id="navbar-container"></div>
    <script>
        fetch("./components/navbar.html")
            .then(res => res.text())
            .then(data => {
                document.getElementById("navbar-container").innerHTML = data;
                inicializarModalNavbar(); // função que liga os eventos do modal
            });

        function inicializarModalNavbar() {
            const modal = document.getElementById("modalAcessibilidade");
            const abrirBotoes = document.querySelectorAll(".abrir-modal");
            abrirBotoes.forEach(botao => {
                botao.addEventListener("click", (e) => {
                    e.preventDefault();
                    modal.classList.add("show");
                });
            });
            // Adicione os outros listeners do modal aqui...
        }
    </script>
    <main>
        <section class="hero-banner">
            <div class="conteudo-banner">
                <img src="../imagens/calcu.png" alt="Imagem Hero" class="hero-image" />
                <a href="#formulario" class="botao">
                    Começar simulação agora <i class="bi bi-arrow-down-right"></i>
                </a>
            </div>
        </section>
        <section class="info">
            <h2>Como é o seu consumo de água?</h2>
            <p>Responda perguntas rápidas sobre seus<br />hábitos e descubra uma estimativa do seu<br />consumo mensal.
            </p>

            <div class="cards">
                <div class="card">
                    <i class="bi bi-patch-question-fill"></i><br />
                    <h3>Por que usar?</h3><br />
                    <p>Simule seu consumo<br /> de água e identifique <br /> onde estão os maiores <br /> desperdícios
                        no seu<br /> dia a dia.
                    </p>
                </div>
                <div class="card">
                    <i class="bi bi-gear-fill"></i><br />
                    <h3>Como funciona?</h3><br />
                    <p>Responda perguntas<br /> rápidas. A calculadora <br /> estima seu consumo <br /> mensal com base
                        nos<br /> hábitos.
                    </p>
                </div>
                <div class="card">
                    <i class="bi bi-rocket-takeoff-fill"></i><br />
                    <h3>O que você ganha?</h3><br />
                    <p>Consciência ambiental, <br /> economia na conta e <br /> ações práticas para um <br /> futuro
                        mais sustentável.
                    </p>
                </div>
            </div>
        </section>
        <section class="chamada-central">
            <h2>Confira agora sua estimativa!</h2>
        </section>

        <hr class="divisor" />

        <section class="explicacao-final">
            <div class="conteudo-explicacao">
                <h2>Calcule com consciência</h2>
                <p>Veja como atitudes simples afetam seu consumo mensal.</p>
            </div>
        </section>
        <div class="form-group" id="formulario">

            <!-- Linha 1: Pessoas + Lava louça com torneira -->
            <div class="linha">
                <div class="campo">
                    <label>Quantas pessoas vivem na sua casa?</label>
                    <div id="pessoas">
                        <button type="button" onclick="setPessoas(event,1)">1</button>
                        <button type="button" onclick="setPessoas(event,2)">2</button>
                        <button type="button" onclick="setPessoas(event,3)">3</button>
                        <button type="button" onclick="setPessoas(event,4)">4</button>
                        <button type="button" onclick="setPessoas(event,5)">5 +</button>
                    </div>
                </div>

                <div class="campo">
                    <label>Lava louça com torneira aberta?</label><br />
                    <div class="radio-group">
                        <label><input type="radio" name="lavaLouca" value="sim" onclick="mostrarLouca(true)" />
                            Sim</label>
                        <label><input type="radio" name="lavaLouca" value="nao" onclick="mostrarLouca(false)" />
                            Não</label>
                    </div>

                    <div id="tempoLoucaContainer" class="hidden">
                        <label>Tempo médio lavando louça (min)</label>
                        <input type="range" id="tempoLouca" min="1" max="20" value="10"
                            oninput="this.nextElementSibling.innerText = this.value + ' min'" />
                        <span>10 min</span>
                    </div>
                </div>
            </div>

            <!-- Linha 2: Descargas + Lava o carro -->
            <div class="linha">
                <div class="campo">
                    <label>Descargas por dia (média total)</label>
                    <input type="number" id="descargas" min="0" placeholder="Insira um número" />
                </div>

                <div class="campo">
                    <!-- Container horizontal para label + select -->
                    <div class="label-select-container">
                        <label>Lava o carro?</label>
                        <div id="metodoCarroContainer" class="hidden">
                            <label>Método</label>
                            <select id="metodoCarro">
                                <label>Método</label>
                                <option value="mangueira">Mangueira</option>
                                <option value="balde">Balde</option>
                            </select>
                        </div>
                    </div>

                    <!-- Radios embaixo -->
                    <div class="radio-group" style="margin-top: 0.5rem;">
                        <label><input type="radio" name="lavaCarro" value="sim" onclick="mostrarCarro(true)" />
                            Sim</label>
                        <label><input type="radio" name="lavaCarro" value="nao" onclick="mostrarCarro(false)" />
                            Não</label>
                    </div>
                </div>
            </div>
            <!-- Linha 3: Tempo de banho + Quantas vezes lava louça -->
            <div class="linha">
                <div class="campo">
                    <label>Tempo médio de banho por pessoa (min)</label>
                    <input type="range" id="tempoBanho" min="5" max="30" value="10"
                        oninput="this.nextElementSibling.innerText = this.value + ' min'" />
                    <span>10 min</span>
                </div>

                <div class="campo">
                    <label>Quantas vezes lava louça por dia?</label>
                    <input type="number" id="vezesLouca" min="0" placeholder="Insira um número" />
                </div>
            </div>

            <!-- Linha 4: Botão -->
            <div class="linha">
                <div class="campo" style="flex: 1; text-align: right;">
                    <button onclick="calcular()" style="margin-top: 30px; ">CALCULAR</button>
                </div>
            </div>
        </div>


        <div id="modalResultado" class="modal hidden">

            <!-- Header azul com ícone -->
            <div class="modal-header-custom">
                <img src="../imagens/globo.png" alt="Ícone do globo" class="modal-icon-img">
            </div>

            <!-- Botão de fechar -->
            <button class="modal-close" onclick="fecharModal()">
                <i class="bi bi-x"></i>
            </button>

            <!-- Conteúdo principal -->
            <div class="modal-body">
                <h3>Seu resultado de Consumo:</h3>
                <p class="descricao" style="text-align: left;">Veja sua estimativa mensal com base nas suas respostas.</p>
                <p class="descricao" style="font-weight: bold;">Você consome aproximadamente:</p>
                <p class="valor">
                    <i class="bi bi-droplet-half"></i>
                    <strong id="resultadoModal">0 litros por mês</strong>
                </p>
                <p id="tipoConsumo">
  <span style="font-weight: bold;">Tipo de consumo:</span>
  <span id="nivelConsumo">moderado.</span>
</p>
                <div class="modal-buttons">
                    <button class="btn gerar-pdf">Gerar PDF</button>
                    <button class="btn refazer" onclick="fecharModal()">Refazer cálculo</button>
                </div>
            </div>
        </div>

        <div id="overlay" class="overlay hidden"></div>



        <div class="resultado hidden" id="resultadoFinal"></div>

        <script>
            let pessoas = 1;

            function setPessoas(event, qtd) {
                pessoas = qtd;
                const botoes = document.querySelectorAll('#pessoas button');
                botoes.forEach(btn => {
                    btn.classList.remove('selected');
                });
                event.target.classList.add('selected');
            }

            function mostrarLouca(show) {
                document.getElementById('tempoLoucaContainer').classList.toggle('hidden', !show);
            }

            function mostrarCarro(show) {
                document.getElementById('metodoCarroContainer').classList.toggle('hidden', !show);
            }

            function calcular() {
                // VALIDAÇÕES INICIO
                if (!pessoas || pessoas < 1) {
                    alert("Por favor, selecione o número de pessoas.");
                    return;
                }

                const banhoInput = document.getElementById('tempoBanho');
                if (!banhoInput.value || Number(banhoInput.value) < 1) {
                    alert("Por favor, informe o tempo do banho.");
                    return;
                }

                const escovarInput = document.getElementById('tempoEscovar');
                if (escovarInput && (!escovarInput.value || Number(escovarInput.value) < 0)) {
                    alert("Por favor, informe o tempo de escovação.");
                    return;
                }

                const descargasInput = document.getElementById('descargas');
                if (!descargasInput.value || Number(descargasInput.value) < 0) {
                    alert("Por favor, informe o número de descargas.");
                    return;
                }

                const lavaLoucaChecked = document.querySelector('input[name="lavaLouca"]:checked');
                if (!lavaLoucaChecked) {
                    alert("Por favor, selecione se lava louça.");
                    return;
                }

                if (lavaLoucaChecked.value === 'sim') {
                    const tempoLoucaInput = document.getElementById('tempoLouca');
                    if (!tempoLoucaInput.value || Number(tempoLoucaInput.value) < 1) {
                        alert("Por favor, informe o tempo lavando louça.");
                        return;
                    }
                }

                const vezesLoucaInput = document.getElementById('vezesLouca');
                if (!vezesLoucaInput.value || Number(vezesLoucaInput.value) < 0) {
                    alert("Por favor, informe quantas vezes lava louça.");
                    return;
                }

                const lavaCarroChecked = document.querySelector('input[name="lavaCarro"]:checked');
                if (!lavaCarroChecked) {
                    alert("Por favor, selecione se lava carro.");
                    return;
                }

                if (lavaCarroChecked.value === 'sim') {
                    const metodoCarroSelect = document.getElementById('metodoCarro');
                    if (!metodoCarroSelect.value) {
                        alert("Por favor, selecione o método de lavar carro.");
                        return;
                    }
                }
                // VALIDAÇÕES FIM

                // SE CHEGOU AQUI, TODOS OS CAMPOS ESTÃO VÁLIDOS
                const banho = Number(document.getElementById('tempoBanho').value);
                const escovar = escovarInput ? Number(escovarInput.value) : 0;
                const descargas = Number(descargasInput.value);
                const vezesLouca = Number(vezesLoucaInput.value);

                const lavaLouca = lavaLoucaChecked.value === 'sim';
                const tempoLouca = lavaLouca ? Number(document.getElementById('tempoLouca').value) : 0;

                const lavaCarro = lavaCarroChecked.value === 'sim';
                const metodoCarro = lavaCarro ? document.getElementById('metodoCarro').value : '';

                let consumo = 0;
                consumo += pessoas * banho * 12 * 30;
                consumo += escovar * 4 * pessoas * 30;
                consumo += descargas * 12;
                consumo += tempoLouca * vezesLouca * 30;
                if (lavaCarro && metodoCarro === 'mangueira') consumo += 500;
                else if (lavaCarro && metodoCarro === 'balde') consumo += 100;

                const tipo = consumo < 5000 ? 'baixo' : consumo < 10000 ? 'moderado.' : 'alto.';

                document.getElementById('resultadoModal').innerText = consumo.toLocaleString() + ' litros por mês.';
                document.getElementById('tipoConsumo').innerText = 'Tipo de consumo: ' + tipo;
                document.getElementById('modalResultado').classList.remove('hidden');
                document.getElementById('overlay').classList.remove('hidden');

                window._resultadoConsumo = { consumo, tipo };
            }

            function fecharModal() {
                document.getElementById('modalResultado').classList.add('hidden');
                document.getElementById('overlay').classList.add('hidden');

                const r = window._resultadoConsumo;
                if (!r) return;

                document.getElementById('resultadoFinal').innerHTML = `
            <h3>SEU CONSUMO ESTIMADO</h3>
            <p>Você consome aproximadamente: <strong>${r.consumo.toLocaleString()} litros por mês</strong></p>
            <p><em>Tipo de consumo: ${r.tipo}</em></p>
        `;
                document.getElementById('resultadoFinal').classList.remove('hidden');
            }

            // Inicializa o botão selecionado padrão
            window.addEventListener('DOMContentLoaded', () => {
                const btnInicial = document.querySelector('#pessoas button');
                if (btnInicial) {
                    btnInicial.classList.add('selected');
                }
            });
        </script>
        <div class="container-planejando">
            <div class="planejando">
                <div class="planejando-container">
                    <div class="text-box-2">
                        <h1>PLANEJANDO HOJE,<br>IMPACTANDO O AMANHÃ</h1>
                        <p>A Aquatech oferece soluções inteligentes, reduz desperdícios e promove conscientização
                            ambiental por meio de pilares estratégicos:
                        </p>
                        <div class="checkboxes">
                            <div class="item">
                                <i class="fa-solid fa-check"></i>
                                <p>Contribuir para um futuro mais responsável</p>
                            </div>
                            <div class="item">
                                <i class="fa-solid fa-check"></i>
                                <p>Promover o uso de tecnologias sustentáveis</p>
                            </div>
                            <div class="item">
                                <i class="fa-solid fa-check"></i>
                                <p>Impulsionar a transformação do setor hídrico</p>
                            </div>
                            <div class="item">
                                <i class="fa-solid fa-check"></i>
                                <p>Garantir equilíbrio no uso dos recursos</p>
                            </div>
                        </div>
                    </div>
                    <div class="image-box-3">
                        <img src="../img/usina.png" alt="quemsomosimg" / class="usina">
                        <div class="image-sobreposicao">
                            <img src="../img/worker2.png" alt="secimg" class="trabalhador">
                        </div>
                        <p class="text-medicao">
                            Quer saber se está gastando demais? Faça a medição agora mesmo!
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <button id="rounded-box">
            <a href="#" class="none">
                <p>Medir meu consumo <i class="fa-solid fa-arrow-trend-up"></i></p>
            </a>
        </button>
        <hr class="linha-3">
        <div class="fazer-login">
            <p>Entre agora e transforme o futuro <br> da água com a gente!</p>
            <button class="login-btn">
                <a href="login.html" class="none">
                    <p>Fazer login</p>
                </a>
            </button>
        </div>
        <hr id="linha-3">
        <div class="sustentabilidade">
            <div class="texto">
                <h1>
                    Sustentabilidade que se adapta,<br>
                    tecnologia que evolui.
                </h1>
                <p>2025, Aquatech.</p>
            </div>
            <div class="linha-e-links">
                <div class="linha-vertical"></div>
                <div class="menu-links">
                    <p class="titulo-menu">Conheça a Plataforma</p>
                    <a href="#">Home</a>
                    <a href="#">Quem somos</a>
                    <a href="#">Recursos</a>
                    <a href="#">Soluções</a>
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="social-media">
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-x-twitter"></i>
                <i class="fa-brands fa-facebook"></i>
            </div>
            <img src="../img/logo_aquatech.png" alt="logo_aquatech" class="logo">
            <p class="copyright">© 2025 Aquatech.</p>
        </footer>
        </div>

    </main>
</body>

</html>